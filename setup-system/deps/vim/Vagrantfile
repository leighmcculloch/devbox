# -*- mode: ruby -*-
# vi: set ft=ruby :

Vagrant.configure("2") do |config|
  config.vm.box = "ubuntu/xenial64"

  config.vm.network :private_network, ip: "192.168.50.50"

  config.vm.provision :shell, privileged: true, inline: <<SHELL
apt-get -y install build-essential libncurses5-dev

git clone --depth=1 https://github.com/vim/vim

cd vim
export VIM_REVISION=$(git rev-parse --short HEAD)

./configure --with-features=huge
make

rm -fr .git

cd -

tar czf vim-$VIM_REVISION.tar.gz vim
cp vim-$VIM_REVISION.tar.gz /vagrant/

SHELL
end
